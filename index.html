<!Doctype html>
<html>
  <head>
    <meta charset="UTF-8">
  <title>Slider with random images and videos</title>

  <link rel="stylesheet" type="text/css" href="slick/slick.css"/>
  <link rel="stylesheet" type="text/css" href="slick/slick-theme.css"/>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/style.css"/>
  
  </head>
  <body>
  	<div class="container">

  		<div class="button-container">
  			<a data-target="#myModal" class="btn btn-primary" data-toggle="modal" id="model-trigger">Click here to open me!</a>
  		</div>

	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	        <h4 class="modal-title" id="myModalLabel">Slider with video in popup</h4>
	      </div>
	        <div class="modal-body">
	           <div class="slider">
	           <div class="image"><img src="img/gallery/980x380/001.jpg"/></div>
	           	<div class="video">
					<video width="320" height="240"  controls autoplay class="sliderAutoplay">
	           			<source src="video/mov_bbb.mp4" type="video/mp4">
	           			<source src="video/mov_bbb.ogg" type="video/ogg">
	           		</video>
	           	</div>
		        <div class="image"><img src="img/gallery/980x380/001.jpg"/></div>
		        <div class="video">
					<video width="320" height="240"  controls autoplay class="sliderAutoplay">
						<source src="video/mov_bbb.mp4" type="video/mp4">
	           			<source src="video/mov_bbb.ogg" type="video/ogg">
	           		</video>
	           	</div>
		        <div class="image"><img src="img/gallery/980x380/002.jpg"/></div>
		        <div class="video">
					<video width="320" height="240"  controls autoplay class="sliderAutoplay test">
						<source src="video/mov_bbb.mp4" type="video/mp4">
	           			<source src="video/mov_bbb.ogg" type="video/ogg">
	           		</video>
	           	</div>
		        <div class="image"><img src="img/gallery/980x380/003.jpg"/></div>
		      </div>
	    	</div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>
	  </div>
	</div>

</div>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="slick/slick.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function(){
    	$('#myModal').modal('show');

    	/* Slick Initialise */
	      $('.slider').slick({
	        dots: false,
	        infinite: true,
	        speed: 500,
	        fade: true,
	        cssEase: 'linear',
	        autoplay: true
	      });


	      /* Video play, pause actions according to the slides  */
	      $('.slider').on('afterChange', function(event, slick, currentSlide){
	      	//console.log(currentSlide);
	      		var videoClass = $('.slider').find('.slick-active').hasClass('video');
	      		//console.log(videoClass);
	      		if(videoClass){
	      			$('.slider').slick('slickPause');
	      			
	      			//console.log($(slick.$slides.get(currentSlide)).children('video').get(0));
					$('.slider').find('.slick-active').children().get(0).play();
	      		}
	      		
            });

	      	 $('.slider').on('click', '.slick-next.slick-arrow', function(event){
	      		var nextSliderPause = $('.slider').find('.slick-active').get(0).hasClass('video');
	      		console.log(nextSliderPause);
	      		if(nextSliderPause){
	      			$('.slider').find('.slick-active').get(0).pause();
	      		}
	      	});


	      /* Stay video slider untill it completes */
	      $('.video .sliderAutoplay').on('ended', function(){
	      		$('.slider').slick('slickPlay');  				
	      })  	
  		});

    /* Paused slick slider once the modal popup closed */
    $('#myModal').on('hidden.bs.modal', function () {
    	//console.log($('.slider').find('.slick-active').hasClass('video'));
    	var videoClass = $('.slider').find('.slick-active').hasClass('video');
    	if(videoClass){
    		$('.slider').find('.slick-active').children().get(0).pause();
    	}
    	$('.slider').slick('slickPause');
	})

	/* Triggered slick slider on  button click */
	$('#model-trigger').on('click', function () {
		$('.slider').slick('slickPlay');
	});


  </script>
  <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html>